<html>
<head>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
  <script src="/Users/ilater/Desktop/datamaps/dist/datamaps.world.js"></script>
</head>

<body>
<div id="container" style="position: relative; width: 100%; height: 100%;"></div>
<script>
    var map = new Datamap({
      element: document.getElementById('container')
    });

    var pairs = [['USA','MEX'],['USA','CHN',200]];
    data = [];
    for (var i in pairs) {
      var link = {
        origin: pairs[i][0],
        destination: pairs[i][1]
      };
      link.given=pairs[i][2]?pairs[i][2]:100;
      console.log(link);
      data.push(link);
      map.arc(data);
    }
    console.log(map);
    map.options.geographyConfig.popupTemplate = function(geo, d) {
              return ['<div class="hoverinfo"><strong>',
                      'Number of things in ' + geo.properties.name,
                      ': ' + d,
                      '</strong></div>'].join('');
          }

</script>
</body>
</html>
